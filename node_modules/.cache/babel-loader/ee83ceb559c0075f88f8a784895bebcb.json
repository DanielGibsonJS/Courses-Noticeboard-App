{"ast":null,"code":"import _objectSpread from \"/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/components/UserContext.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nexport const Context = React.createContext();\nexport class Provider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: JSON.parse(localStorage.getItem('user'))\n    };\n\n    this.signIn = (emailAddress, password, props) => {\n      axios({\n        method: 'get',\n        url: 'http://localhost:5000/api/users',\n        auth: {\n          username: emailAddress,\n          password\n        }\n      }).then(res => {\n        this.setState({\n          user: _objectSpread({}, res.data, {\n            emailAddress,\n            password\n          })\n        });\n        window.localStorage.setItem('user', JSON.stringify(_objectSpread({}, res.data, {\n          emailAddress,\n          password\n        })));\n        const history = props.history,\n              location = props.location;\n        const path = location.state ? location.state.prevLocation : '/';\n        history.push(path);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.signOut = () => {\n      this.setState({\n        user: {}\n      });\n      window.localStorage.removeItem('user');\n    };\n  }\n\n  render() {\n    const children = this.props.children;\n    const user = this.state.user;\n    return React.createElement(Context.Provider, {\n      value: {\n        user,\n        actions: {\n          signIn: this.signIn,\n          singOut: this.signOut\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, children);\n  }\n\n}\nexport const Consumer = Context.Consumer;","map":{"version":3,"sources":["/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/components/UserContext.js"],"names":["React","Component","axios","Context","createContext","Provider","state","user","JSON","parse","localStorage","getItem","signIn","emailAddress","password","props","method","url","auth","username","then","res","setState","data","window","setItem","stringify","history","location","path","prevLocation","push","catch","err","console","log","signOut","removeItem","render","children","actions","singOut","Consumer"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,OAAO,GAAGH,KAAK,CAACI,aAAN,EAAhB;AAEP,OAAO,MAAMC,QAAN,SAAuBJ,SAAvB,CAAiC;AAAA;AAAA;AAAA,SACtCK,KADsC,GAC9B;AACNC,MAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;AADA,KAD8B;;AAAA,SAKtCC,MALsC,GAK7B,CAACC,YAAD,EAAeC,QAAf,EAAyBC,KAAzB,KAAmC;AAC1Cb,MAAAA,KAAK,CAAC;AACJc,QAAAA,MAAM,EAAE,KADJ;AAEJC,QAAAA,GAAG,EAAE,iCAFD;AAGJC,QAAAA,IAAI,EAAE;AACJC,UAAAA,QAAQ,EAAEN,YADN;AAEJC,UAAAA;AAFI;AAHF,OAAD,CAAL,CAQCM,IARD,CAQMC,GAAG,IAAI;AACX,aAAKC,QAAL,CAAc;AACZf,UAAAA,IAAI,oBACCc,GAAG,CAACE,IADL;AAEFV,YAAAA,YAFE;AAGFC,YAAAA;AAHE;AADQ,SAAd;AAOAU,QAAAA,MAAM,CAACd,YAAP,CAAoBe,OAApB,CAA4B,MAA5B,EAAoCjB,IAAI,CAACkB,SAAL,mBAC/BL,GAAG,CAACE,IAD2B;AAElCV,UAAAA,YAFkC;AAGlCC,UAAAA;AAHkC,WAApC;AARW,cAaHa,OAbG,GAamBZ,KAbnB,CAaHY,OAbG;AAAA,cAaMC,QAbN,GAamBb,KAbnB,CAaMa,QAbN;AAcX,cAAMC,IAAI,GAAGD,QAAQ,CAACtB,KAAT,GAAiBsB,QAAQ,CAACtB,KAAT,CAAewB,YAAhC,GAA8C,GAA3D;AACAH,QAAAA,OAAO,CAACI,IAAR,CAAaF,IAAb;AACD,OAxBD,EAyBCG,KAzBD,CAyBOC,GAAG,IAAI;AACZC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OA3BD;AA4BD,KAlCqC;;AAAA,SAoCtCG,OApCsC,GAoC5B,MAAM;AACd,WAAKd,QAAL,CAAc;AACZf,QAAAA,IAAI,EAAE;AADM,OAAd;AAGAiB,MAAAA,MAAM,CAACd,YAAP,CAAoB2B,UAApB,CAA+B,MAA/B;AACD,KAzCqC;AAAA;;AA2CtCC,EAAAA,MAAM,GAAG;AAAA,UACCC,QADD,GACc,KAAKxB,KADnB,CACCwB,QADD;AAAA,UAEChC,IAFD,GAEU,KAAKD,KAFf,CAECC,IAFD;AAGP,WACE,oBAAC,OAAD,CAAS,QAAT;AAAkB,MAAA,KAAK,EAAE;AACvBA,QAAAA,IADuB;AAEvBiC,QAAAA,OAAO,EAAE;AACP5B,UAAAA,MAAM,EAAE,KAAKA,MADN;AAEP6B,UAAAA,OAAO,EAAE,KAAKL;AAFP;AAFc,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQIG,QARJ,CADF;AAYD;;AA1DqC;AA6DxC,OAAO,MAAMG,QAAQ,GAAGvC,OAAO,CAACuC,QAAzB","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nexport const Context = React.createContext();\n\nexport class Provider extends Component {\n  state = {\n    user: JSON.parse(localStorage.getItem('user')),\n  }\n\n  signIn = (emailAddress, password, props) => {\n    axios({\n      method: 'get',\n      url: 'http://localhost:5000/api/users',\n      auth: {\n        username: emailAddress,\n        password,\n      },\n    })\n    .then(res => {\n      this.setState({\n        user: {\n          ...res.data,\n          emailAddress,\n          password,\n        },\n      });\n      window.localStorage.setItem('user', JSON.stringify({\n        ...res.data,\n        emailAddress,\n        password,\n      }));\n      const { history, location } = props;\n      const path = location.state ? location.state.prevLocation: '/';\n      history.push(path)\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  signOut = () => {\n    this.setState({\n      user: {},\n    });\n    window.localStorage.removeItem('user');\n  }\n\n  render() {\n    const { children } = this.props;\n    const { user } = this.state;\n    return(\n      <Context.Provider value={{\n        user,\n        actions: {\n          signIn: this.signIn,\n          singOut: this.signOut,\n        },\n      }}\n      >\n        { children }\n      </Context.Provider>\n    );\n  }\n}\n\nexport const Consumer = Context.Consumer;"]},"metadata":{},"sourceType":"module"}