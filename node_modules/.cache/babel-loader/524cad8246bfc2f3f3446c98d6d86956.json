{"ast":null,"code":"var _jsxFileName = \"/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/App.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport { Provider } from './components/UserContext';\nimport Header from './components/Header';\nimport Courses from './components/Courses';\nimport CourseDetail from './components/CourseDetail';\nimport UserSignIn from './components/UserSignIn';\nimport UserSignUp from './components/UserSignUp';\nimport UserSignOut from './components/UserSignOut';\nimport CreateCourse from './components/CreateCourse';\nimport UpdateCourse from './components/UpdateCourse';\nimport NotFound from './components/NotFound';\nimport unhandledError from './components/unhandledError';\nimport Forbidden from './components/Fobidden';\nimport PrivateRoute from './components/PrivateRoute';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      authUser: {},\n      validationErrors: ''\n    };\n  }\n\n  handleSignIn(e, emailAddress, password, props) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    axios.get('http://localhost:5000/api/users', {\n      auth: {\n        username: emailAddress,\n        password: password\n      }\n    }).then(res => {\n      const user = res.data;\n      const fullName = user.firstName + ' ' + user.lastName;\n      localStorage.setItem('id', user.id);\n      localStorage.setItem('username', emailAddress);\n      localStorage.setItem('password', password);\n      localStorage.setItem('name', fullName);\n      this.setState({\n        validationErrors: ''\n      });\n      const history = props.history,\n            location = props.location;\n      const path = location.state ? location.state.prevLocation : '/';\n      history.push(path);\n    }).catch(err => {\n      if (err.response.status === 400) {\n        const error = err.response.data.message;\n        this.setState({\n          validationErrors: error\n        });\n      } else if (err.response.status === 500) {\n        this.props.history.push('/error');\n      }\n    });\n  }\n\n  handleSignOut() {\n    localStorage.clear();\n    this.setState({\n      validationErrors: \"\"\n    });\n    this.props.history.push(\"/\");\n  }\n\n  render() {\n    return React.createElement(UserContext.Provider, {\n      value: {\n        signIn: this.handleSignIn.bind(this),\n        singOut: this.handleSignOut.bind(this),\n        validationErrors: this.state.validationErrors\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"root\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: Courses,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/courses/:id\",\n      render: () => React.createElement(CourseDetail, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signin\",\n      render: () => React.createElement(UserSignIn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signup\",\n      render: () => React.createElement(UserSignUp, {\n        signIn: this.handleSignIn.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signout\",\n      render: () => React.createElement(Redirect, {\n        to: \"/signin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      exact: true,\n      path: \"/courses/create\",\n      component: CreateCourse,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      exact: true,\n      path: \"/courses/:id/update\",\n      component: UpdateCourse,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/fobidden\",\n      component: Forbidden,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/notfound\",\n      component: NotFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/error\",\n      component: Error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(Route, {\n      component: NotFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/App.js"],"names":["React","Component","BrowserRouter","Route","Switch","Redirect","axios","Provider","Header","Courses","CourseDetail","UserSignIn","UserSignUp","UserSignOut","CreateCourse","UpdateCourse","NotFound","unhandledError","Forbidden","PrivateRoute","App","state","authUser","validationErrors","handleSignIn","e","emailAddress","password","props","preventDefault","get","auth","username","then","res","user","data","fullName","firstName","lastName","localStorage","setItem","id","setState","history","location","path","prevLocation","push","catch","err","response","status","error","message","handleSignOut","clear","render","signIn","bind","singOut","Error"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport {Provider} from './components/UserContext';\n\nimport Header from './components/Header';\nimport Courses from './components/Courses';\nimport CourseDetail from './components/CourseDetail';\nimport UserSignIn from './components/UserSignIn';\nimport UserSignUp from './components/UserSignUp';\nimport UserSignOut from './components/UserSignOut';\nimport CreateCourse from './components/CreateCourse';\nimport UpdateCourse from './components/UpdateCourse';\nimport NotFound from './components/NotFound';\nimport unhandledError from './components/unhandledError';\nimport Forbidden from './components/Fobidden';\nimport PrivateRoute from './components/PrivateRoute';\n\nclass App extends Component {\n\n  state = {\n    authUser: {},\n    validationErrors: ''\n  }\n\n  handleSignIn(e, emailAddress, password, props) {\n    if(e) {\n      e.preventDefault();\n    }\n\n    axios.get('http://localhost:5000/api/users',\n    {\n      auth: {\n        username: emailAddress,\n        password: password\n      }\n    })\n    .then(res => {\n      const user = res.data;\n      const fullName = user.firstName + ' ' + user.lastName;\n\n      localStorage.setItem('id', user.id);\n      localStorage.setItem('username', emailAddress);\n      localStorage.setItem('password', password);\n      localStorage.setItem('name', fullName);\n\n      this.setState({\n        validationErrors: ''\n      });\n\n      const { history, location } = props;\n      const path = location.state ? location.state.prevLocation : '/';\n      history.push(path);\n    })\n    .catch(err => {\n      if(err.response.status === 400) {\n        const error = err.response.data.message;\n\n        this.setState({\n          validationErrors: error\n        });\n\n      } else if (err.response.status === 500) {\n        this.props.history.push('/error');\n      }\n    })\n  }\n\n  handleSignOut() {\n    localStorage.clear();\n    this.setState({\n      validationErrors: \"\"\n    });\n    this.props.history.push(\"/\");\n  }\n\n\n  render() {\n    return (\n      <UserContext.Provider\n        value={{\n          signIn: this.handleSignIn.bind(this),\n          singOut: this.handleSignOut.bind(this),\n          validationErrors: this.state.validationErrors\n        }}>\n        <div className=\"root\">\n          <Header />\n          <Switch>\n            <Route exact path=\"/\" component={Courses} />\n            <Route exact path=\"/courses/:id\" render={ () => <CourseDetail /> } />\n\n            <Route path=\"/signin\" render={ () => <UserSignIn /> } />\n            <Route path=\"/signup\" render={ () => <UserSignUp signIn={this.handleSignIn.bind(this)} /> } />\n            <Route path=\"/signout\" render={ () => <Redirect to=\"/signin\" /> } />\n\n            <PrivateRoute exact path=\"/courses/create\" component={CreateCourse} />\n            <PrivateRoute exact path=\"/courses/:id/update\" component={UpdateCourse} />\n\n            <Route path=\"/fobidden\" component={Forbidden} />\n            <Route path=\"/notfound\" component={NotFound} />\n            <Route path=\"/error\" component={Error} />\n\n            <Route component={NotFound} />\n          </Switch>\n        </div>\n      </UserContext.Provider>\n    )\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}