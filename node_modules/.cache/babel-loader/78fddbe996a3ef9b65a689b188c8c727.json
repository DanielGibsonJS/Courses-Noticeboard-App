{"ast":null,"code":"var _jsxFileName = \"/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/App.js\";\n// App.js is a container for all other components and manages routing\nimport React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport axios from 'axios'; // Import components\n\nimport Header from './components/Header';\nimport Courses from './components/Courses';\nimport CourseDetail from './components/CourseDetail';\nimport UserSignIn from './components/UserSignIn';\nimport UserSignUp from './components/UserSignUp';\nimport UserSignOut from './components/UserSignOut';\nimport CreateCourse from './components/CreateCourse';\nimport UpdateCourse from './components/UpdateCourse';\nimport NotFound from './components/NotFound';\nimport UnhandledError from './components/UnhandledError';\nimport Forbidden from './components/Forbidden';\nimport PrivateRoute from './components/PrivateRoute';\n\nclass App extends Component {\n  /* Keeps global state in App component - instead of React Context API\n  * After user signs-in this update props and make them available to pass down to all other components */\n  constructor() {\n    super();\n    this.state = {\n      //Hold state for validation on sign-in\n      validationError: ''\n    };\n    this.handleSignIn = this.handleSignIn.bind(this);\n  }\n  /* Called from UserSignIn component - handles the sign-in process */\n\n\n  handleSignIn(username, password, props) {\n    axios.get(\"http://localhost:5000/api/users\", {\n      auth: {\n        username: username,\n        password: password\n      }\n    })\n    /* If authentication is successful - Store user data in the browser */\n    .then(res => {\n      window.localStorage.setItem('FirstName', res.data.firstName);\n      window.localStorage.setItem('LastName', res.data.lastName);\n      window.localStorage.setItem('EmailAddress', username);\n      window.localStorage.setItem('Password', password);\n      window.localStorage.setItem('UserId', JSON.stringify(res.data.id));\n      window.localStorage.setItem('IsLoggedIn', JSON.stringify(true)); // window.location.assign('/')\n\n      /* Clear validation errors from sign-in form */\n\n      this.setState({\n        validationError: ''\n      });\n      /*\n      *\n      * Error #1 - props.history is not working. Seems like there is no props being passed through - Not sure how to fix this\n      * \n      */\n\n      const history = props.history,\n            location = props.location;\n      const path = location.state ? location.prevLocation : '/';\n      history.push(path);\n    })\n    /*\n      *\n      * Error #2 - err.response is undefined (console error) - Not sure how to fix this\n      * \n      */\n\n    /* Catch errors - Check if server error = push to /error page */\n    .catch(err => {\n      if (err.response.status === 401) {\n        console.log(err.response);\n        console.log(props);\n        /* Status 401 = unauthorized access - must be a validation error */\n\n        this.setState({\n          validationError: err.response.data.message\n        });\n      } else {\n        /* If not a 401 validation error then it must be a server error */\n        console.error('Error fetching and parsing data', err);\n        this.props.history.push('/error');\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"root\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: Courses,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      path: \"/courses/create\",\n      component: CreateCourse,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      path: \"/courses/:id/update\",\n      component: UpdateCourse,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/courses/:id\",\n      component: CourseDetail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/signin\",\n      component: () => React.createElement(UserSignIn, {\n        handleSignIn: this.handleSignIn,\n        validationError: this.state.validationError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      component: UserSignUp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/signout\",\n      component: UserSignOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/forbidden\",\n      component: Forbidden,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/notfound\",\n      component: NotFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/error\",\n      component: UnhandledError,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Route, {\n      component: NotFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/App.js"],"names":["React","Component","BrowserRouter","Route","Switch","axios","Header","Courses","CourseDetail","UserSignIn","UserSignUp","UserSignOut","CreateCourse","UpdateCourse","NotFound","UnhandledError","Forbidden","PrivateRoute","App","constructor","state","validationError","handleSignIn","bind","username","password","props","get","auth","then","res","window","localStorage","setItem","data","firstName","lastName","JSON","stringify","id","setState","history","location","path","prevLocation","push","catch","err","response","status","console","log","message","error","render"],"mappings":"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","sourcesContent":["// App.js is a container for all other components and manages routing\n\nimport React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport axios from 'axios';\n\n// Import components\nimport Header from './components/Header';\nimport Courses from './components/Courses';\nimport CourseDetail from './components/CourseDetail';\nimport UserSignIn from './components/UserSignIn';\nimport UserSignUp from './components/UserSignUp';\nimport UserSignOut from './components/UserSignOut';\nimport CreateCourse from './components/CreateCourse';\nimport UpdateCourse from './components/UpdateCourse';\nimport NotFound from './components/NotFound';\nimport UnhandledError from './components/UnhandledError';\nimport Forbidden from './components/Forbidden';\nimport PrivateRoute from './components/PrivateRoute';\n\nclass App extends Component {\n\n  /* Keeps global state in App component - instead of React Context API\n  * After user signs-in this update props and make them available to pass down to all other components */\n\n  constructor() {\n    super();\n    this.state = {\n      //Hold state for validation on sign-in\n      validationError: '',\n    };\n    this.handleSignIn = this.handleSignIn.bind(this);\n  }\n\n  /* Called from UserSignIn component - handles the sign-in process */\n  handleSignIn(username, password, props) {\n    axios.get(\"http://localhost:5000/api/users\", {\n      auth: {\n        username: username,\n        password: password,\n      }\n    })\n    /* If authentication is successful - Store user data in the browser */\n    .then(res => { \n      window.localStorage.setItem('FirstName',res.data.firstName)\n      window.localStorage.setItem('LastName', res.data.lastName)\n      window.localStorage.setItem('EmailAddress', username)\n      window.localStorage.setItem('Password', password)\n      window.localStorage.setItem('UserId', JSON.stringify(res.data.id))\n      window.localStorage.setItem('IsLoggedIn', JSON.stringify(true))\n      // window.location.assign('/')\n\n      /* Clear validation errors from sign-in form */\n      this.setState({ validationError: '' })\n\n      /*\n      *\n      * Error #1 - props.history is not working. Seems like there is no props being passed through - Not sure how to fix this\n      * \n      */\n      const { history, location } = props;\n      const path = location.state ? location.prevLocation : '/';\n      history.push(path);\n\n\n    })\n    /*\n      *\n      * Error #2 - err.response is undefined (console error) - Not sure how to fix this\n      * \n      */\n    /* Catch errors - Check if server error = push to /error page */\n    .catch(err => {\n      if (err.response.status === 401) {\n        console.log(err.response)\n        console.log(props)\n        /* Status 401 = unauthorized access - must be a validation error */\n        this.setState ({validationError: err.response.data.message })\n      } else {\n        /* If not a 401 validation error then it must be a server error */\n        console.error('Error fetching and parsing data', err);\n        this.props.history.push('/error');\n      }\n    });\n  }\n\n  render() {\n    return (\n      <BrowserRouter>\n        <div className=\"root\">\n          <Header />\n          <Switch>\n            <Route exact path=\"/\" component={Courses} />\n            <PrivateRoute path=\"/courses/create\" component={CreateCourse} />\n            <PrivateRoute path=\"/courses/:id/update\" component={UpdateCourse} />\n            <Route exact path=\"/courses/:id\" component={CourseDetail} />\n\n            {/* Pass handleSignIn and validation errors through to UserSignIn component*/}\n            <Route exact path=\"/signin\" component={() => <UserSignIn \n              handleSignIn={this.handleSignIn} \n              validationError={this.state.validationError}\n            /> } />\n            {/* <Route exact path=\"/signin\" render={ () => <UserSignIn /> } /> */}\n            <Route exact path=\"/signup\" component={UserSignUp} />\n            <Route exact path=\"/signout\" component={UserSignOut} />\n\n            <Route exact path=\"/forbidden\" component={Forbidden} />\n            <Route exact path=\"/notfound\" component={NotFound} />\n            <Route exact path=\"/error\" component={UnhandledError} />\n\n            {/* If any route doesn't match the above then route to NotFound component */}\n            <Route component={NotFound} />\n          </Switch>\n        </div>\n      </BrowserRouter>    \n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}