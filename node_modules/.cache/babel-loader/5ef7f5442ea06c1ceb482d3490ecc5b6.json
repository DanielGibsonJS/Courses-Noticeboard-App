{"ast":null,"code":"var _jsxFileName = \"/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/components/CourseDetail.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport ReactMarkdown from 'react-markdown';\n/* npm plugin to apply animation to rendered content - Slowly appears */\n\nimport { Spring } from 'react-spring/renderprops';\n\nclass CourseDetail extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      course: [],\n      user: []\n    };\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n  /* When page first loads - Do this: */\n\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    /* Fetch the requested course from the API using axios */\n\n    axios.get(\"http://localhost:5000/api/courses/\".concat(id)).then(res => {\n      /* If successful then save course and user data to state */\n      this.setState({\n        course: res.data,\n        user: res.data.User\n      });\n    })\n    /* Catch errors - Check if server error = push to /error page */\n    .catch(err => {\n      if (err.response.status === 500) {\n        console.error('Error fetching and parsing data', err);\n        this.props.history.push('/error');\n      } else {\n        this.props.history.push('/notfound');\n      }\n    });\n  }\n  /* Handles request to delete course */\n\n\n  handleDelete() {\n    const _this$props = this.props,\n          params = _this$props.match.params,\n          history = _this$props.history;\n    axios.delete(\"http://localhost:5000/api/courses/\".concat(params.id), {\n      auth: {\n        username: window.localStorage.getItem(\"EmailAddress\"),\n        password: window.localStorage.getItem(\"Password\")\n      }\n    })\n    /* If successful then redirect back to courses page */\n    .then(() => {\n      history.push('/');\n    })\n    /* Catch errors - Check if server error = push to /error page */\n    .catch(err => {\n      if (err.response.status === 500) {\n        console.error('Error fetching and parsing data', err);\n        this.props.history.push('/error');\n      } else {\n        this.props.history.push('/notfound');\n      }\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          course = _this$state.course,\n          user = _this$state.user;\n    const isLoggedIn = localStorage.getItem(\"IsLoggedIn\");\n    const UserId = JSON.parse(localStorage.getItem(\"UserId\"));\n    return React.createElement(Spring, {\n      from: {\n        opacity: 0\n      },\n      to: {\n        opacity: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, props => React.createElement(\"div\", {\n      style: props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"actions--bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bounds\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"grid-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, isLoggedIn && user.id === UserId ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Link, {\n      className: \"button\",\n      to: \"/courses/\".concat(course.id, \"/update\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Update Course\"), React.createElement(\"button\", {\n      className: \"button\",\n      to: \"#\",\n      onClick: this.handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Delete Course\")) : '', React.createElement(Link, {\n      className: \"button button-secondary\",\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Return to List\")))), React.createElement(\"div\", {\n      className: \"bounds course--detail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"grid-66\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"course--header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"course--label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Course\"), React.createElement(\"h3\", {\n      className: \"course--title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, course.title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"By \", user.firstName, \" \", user.lastName)), React.createElement(\"div\", {\n      className: \"course-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(ReactMarkdown, {\n      source: course.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"grid-25 grid-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"course--stats\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"course--stats--list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"course--stats--list--item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Estimated Time\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, course.estimatedTime)), React.createElement(\"li\", {\n      className: \"course--stats--list--item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Materials Needed\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(ReactMarkdown, {\n      source: course.materialsNeeded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })))))))));\n  }\n\n}\n\nexport default CourseDetail;","map":{"version":3,"sources":["/Users/danielgibson/Desktop/GitHub/techdegree-project-10/client/src/components/CourseDetail.js"],"names":["React","Component","Link","axios","ReactMarkdown","Spring","CourseDetail","constructor","props","state","course","user","handleDelete","bind","componentDidMount","id","match","params","get","then","res","setState","data","User","catch","err","response","status","console","error","history","push","delete","auth","username","window","localStorage","getItem","password","render","isLoggedIn","UserId","JSON","parse","opacity","title","firstName","lastName","description","estimatedTime","materialsNeeded"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport ReactMarkdown from 'react-markdown';\n\n/* npm plugin to apply animation to rendered content - Slowly appears */\nimport { Spring } from 'react-spring/renderprops';\n\n\nclass CourseDetail extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = {\n      course: [],\n      user: [],\n    }\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  /* When page first loads - Do this: */\n  componentDidMount() {\n    const id = this.props.match.params.id    \n\n    /* Fetch the requested course from the API using axios */\n    axios\n      .get(`http://localhost:5000/api/courses/${id}`)\n      .then(res => {\n        /* If successful then save course and user data to state */\n        this.setState({\n          course: res.data,\n          user: res.data.User,\n        });\n      })\n      /* Catch errors - Check if server error = push to /error page */\n      .catch(err => {\n        if (err.response.status === 500) {\n          console.error('Error fetching and parsing data', err);\n          this.props.history.push('/error');\n        } else {\n          this.props.history.push('/notfound');\n        }\n      });\n  }\n\n  /* Handles request to delete course */\n  handleDelete() {\n    const { match: { params }, history } = this.props;\n\n    axios\n      .delete(`http://localhost:5000/api/courses/${params.id}`, {\n        auth: {\n          username: window.localStorage.getItem(\"EmailAddress\"),\n          password: window.localStorage.getItem(\"Password\"),\n        }\n      })\n      /* If successful then redirect back to courses page */\n      .then(() => {\n        history.push('/');\n      })\n      /* Catch errors - Check if server error = push to /error page */\n      .catch(err => {\n        if (err.response.status === 500) {\n          console.error('Error fetching and parsing data', err);\n          this.props.history.push('/error');\n        } else {\n          this.props.history.push('/notfound');\n        }\n      });\n  }\n\n  render () {\n\n    const { course, user } = this.state;\n    const isLoggedIn = localStorage.getItem(\"IsLoggedIn\");\n    const UserId = JSON.parse(localStorage.getItem(\"UserId\"));\n\n\n    return (\n      <Spring from={{ opacity: 0 }} to={{ opacity: 1}}>\n        {props => (\n          <div style={props}>\n            <div className=\"actions--bar\">\n              <div className=\"bounds\">\n                <div className=\"grid-100\">\n\n                  {/* Check if the user has access to delete this course */}\n                  {(isLoggedIn && user.id === UserId) ? (\n                      <span>\n                        <Link className=\"button\" to={`/courses/${course.id}/update`}>\n                          Update Course\n                        </Link>\n                        <button className=\"button\" to=\"#\" onClick={this.handleDelete}>\n                          Delete Course\n                        </button>\n                      </span>\n                  ) :  '' }\n\n                  <Link className=\"button button-secondary\" to=\"/\">\n                    Return to List\n                  </Link>\n\n                </div>\n              </div>\n            </div>\n            <div className=\"bounds course--detail\">\n              <div className=\"grid-66\">\n                <div className=\"course--header\">\n                  <h4 className=\"course--label\">Course</h4>\n                  <h3 className=\"course--title\">{course.title}</h3>\n                  <p>By {user.firstName} {user.lastName}</p>\n                </div>\n                <div className=\"course-description\">\n                  <ReactMarkdown source={course.description} />\n                </div>\n              </div>\n              <div className=\"grid-25 grid-right\">\n                <div className=\"course--stats\">\n                  <ul className=\"course--stats--list\">\n                    <li className=\"course--stats--list--item\">\n                      <h4>Estimated Time</h4>\n                      <h3>{course.estimatedTime}</h3>\n                    </li>\n                    <li className=\"course--stats--list--item\">\n                      <h4>Materials Needed</h4>\n                      <ul>\n                        <ReactMarkdown source={course.materialsNeeded} />\n                      </ul>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </Spring>\n    )\n  }\n\n}\n\nexport default CourseDetail;\n"]},"metadata":{},"sourceType":"module"}